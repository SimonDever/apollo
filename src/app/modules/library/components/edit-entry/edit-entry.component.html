<ng-template #content let-modal>
		<div class="modal-header">
			<h4 class="modal-title" id="modal-basic-title">Search Terms</h4>
			<button type="button" class="close" data-dismiss="modal" (click)="closeSearchDialog()" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<div class="modal-body">
			<form [formGroup]="searchForm">
				<div class="form-group">
					<div class="input-group">
						<input formControlName="searchTerms" class="form-control" placeholder="title, genre, actor, etc." />
					</div>
				</div>
			</form>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-outline-light" (click)="search()">Search Online</button>
		</div>
	</ng-template>

	<div class="icon-button-box">
		<button octicon="x" class="icon-button close-button" (click)="close()"></button>
		<button octicon="trashcan" class="icon-button trash-button" (click)="trash()"></button>
		<button octicon="check" class="icon-button save-button" (click)="save()">Save</button>
		<button octicon="search" class="icon-button search-metadata-provider-button"
			(click)="showSearchDialog(content)"></button>
	</div>

	<div class="metadata-container">
		<input (change)="posterChange($event)" type="file" #posterInput />
		<div class="poster-preview" (click)="posterInput.click()">
			<div *ngIf="!poster_path" class="poster-placeholder">Select Poster</div>
			<img *ngIf="poster_path" [src]="poster_path" />
		</div>
		<input (change)="fileChange($event)" type="file" #fileInput />
		<div class="right-fields">
			<div class="field-grid three-column-reverse">
				<span class="metadata-field-key">Video file</span>
				<span class="metadata-field-value">{{file}}</span>
				<button class="btn btn-outline-light" (click)="fileInput.click()">
					Browse
				</button>
			</div>
			<form [formGroup]="entryForm">
				<ng-container *ngFor="let field of entry | keyvalue">
					<div class="field-grid three-column-reverse" *ngIf="isKeyVisible(field.key)">
						<span class="metadata-field-key">
							{{ field.key.split('_').join(' ') | titlecase }}
						</span>
						<span class="metadata-field-value">
							<div contenteditable="true" ngDefaultControl [formControlName]="field.key"></div>
						</span>
						<button class="btn btn-outline-light" (click)="removeField(field.key)">Remove</button>
					</div>
				</ng-container>
			</form>

			<div class="field-grid three-column-reverse">
				<span class="metadata-field-key">New field</span>
				<span class="metadata-field-value">
					<form [formGroup]="newFieldForm" class="new-form-field">
						<input type="text" formControlName="newFieldName" />
					</form>
				</span>
				<button class="btn btn-outline-light" (click)="addNewField()">Add</button>
			</div>
		</div>
		<router-outlet></router-outlet>
	</div>
