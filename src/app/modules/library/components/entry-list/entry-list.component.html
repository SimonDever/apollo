<div class="list-view" @fadeInOut>
	<div class="entry-list">
		<virtual-scroller class="candy" #scroll [items]="(entries$ | async)" [bufferAmount]="20">
			<div *ngFor="let entry of scroll.viewPortItems" class="entry-box" (click)="toggleActions($event, entry)">
				<img *ngIf="posterUrl(entry.poster_path) else missingPoster" class="poster-preview entry-poster" id="poster-{{entry.id}}" [src]="posterUrl(entry.poster_path)" />
				<ng-template #missingPoster>
					<div class="missing-poster-icon" class="missing-poster" [width]="'348'" [color]="'#ccc'" octicon="question">
					</div>
				</ng-template>
				<div class="entry-actions">
					<div class="entry-title">
						{{entry.title}}
						<span *ngIf="entry.year">({{entry.year}})</span>
						<span *ngIf="!entry.year && entry.release_date">({{entry.release_date | date: 'yyyy'}})</span>
					</div>
					<div class="entry-blurb">{{entry.overview}}</div>
					<div class="icon-button-box-horizontal">
						<button octicon="trashcan" class="icon-button trash-button" (click)="showDeleteConfirmation($event, deleteModal)"></button>
						<button octicon="pencil" class="icon-button edit-button" (click)="edit($event)"></button>
						<button octicon="play" class="icon-button play-button" (click)="play($event, entry.file)"></button>
					</div>
				</div>
			</div>
		</virtual-scroller>
	</div>

	<ng-template #deleteModal let-modal>
		<div class="modal-header">
			<h4 class="modal-title" id="modal-basic-title">Confirm deletion</h4>
			<button type="button" class="close" data-dismiss="modal" (click)="closeModal('close')" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<div class="modal-body">
			<p><strong>Are you sure you want to delete this entry?</strong></p>
			<p><strong>This operation can not be undone.</strong></p>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-outline-secondary" (click)="closeModal('cancel')">Cancel</button>
			<button type="button" class="btn btn-danger" (click)="closeModal('ok')">Ok</button>
		</div>
	</ng-template>
