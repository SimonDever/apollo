<div class="list-view">
	<!--
	<div class="icon-button-box">
		<button octicon="plus" class="icon-button add-button" (click)="addEntry()"></button>
	</div>
	-->
	<cdk-virtual-scroll-viewport itemSize="18" class="entry-list" minBufferPx="2000" maxBufferPx="3000">
		<div class="candy">
			<div *cdkVirtualFor="let entry of (entries$ | async)" class="entry-box" (click)="toggleActions(entry)"
				[ngStyle]="{'background-color': entry.id !== selectedEntryId ? 'transparent' : '#333' }">
				<img *ngIf="posterUrl(entry.poster_path)" class="poster-preview entry-poster" id="poster-{{entry.id}}" [src]="posterUrl(entry.poster_path)"
					[ngStyle]="{'opacity': entry.id !== selectedEntryId ? 1 : 0.2 }" />
				<div *ngIf="!posterUrl(entry.poster_path)" [width]="'260'" [color]="'#ccc'" octicon="question" class="missing-poster-icon"></div>
				<div class="entry-actions" [hidden]="entry.id !== selectedEntryId">
					<div class="entry-title">{{entry.title}}</div>
					<div class="entry-blurb">{{entry.overview}}</div>
					<div class="icon-button-box-horizontal">
						<button octicon="trashcan" class="icon-button trash-button"
							(click)="showDeleteConfirmation(deleteModal)"></button>
						<button octicon="pencil" class="icon-button edit-button" (click)="edit()"></button>
					</div>
				</div>
			</div>
		</div>
	</cdk-virtual-scroll-viewport>
</div>

<ng-template #deleteModal let-modal>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Confirm deletion</h4>
		<button type="button" class="close" data-dismiss="modal" (click)="closeModal('close')" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<p><strong>Are you sure you want to delete this entry?</strong></p>
		<p><span class="text-danger">This operation can not be undone.</span></p>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-outline-secondary" (click)="closeModal('cancel')">Cancel</button>
		<button type="button" class="btn btn-danger" (click)="closeModal('ok')">Ok</button>
	</div>
</ng-template>
